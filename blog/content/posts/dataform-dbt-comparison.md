---
title: "dbt vs Dataform"
date: 2021-01-26T10:40:39+09:00
draft: false
description: ""
tags: []
---

最近、業務でDWH/Datamartの整備や品質担保を効率的に行いたくなる事情があり、調査したところdbtとdataformがツールとして有力そうだったので、比較してみました。

# TL;DR

* dbtは機能が充実しており、カスタマイズするポイントも多く、様々な用途に向く反面、理解し使いこなすための学習コストがかかります。
* dataformはWebビューによる開発体験が非常に良いです。機能もほとんどはわかりやすく、迷うことも少ないです。一方、dbtに比較して融通はききづらいのと、独特な環境分離の方法を受け入れる必要があります。
* どちらも十分な機能は備えているので、どちらが良いかは導入する組織の環境やカルチャー次第でしょう。
* dbtは強固なエンジニアリング組織を持つならばdbt、GCPを利用して分析基盤を作ったりもするが、やりたいことはシンプルでツールの運用にもコストをかけられない場合はdataformが良いでしょう。

# 筆者のおかれた環境

* toB / toCの自社ウェブサービスを運営する企業 (Ubie, inc)
* データ活用が根幹となるサービスであり、プリミティブなデータ基盤は存在
* データの活用方法は、MLでの利用から、ビジネスサイドがBIでクライアントやサービスの状況を知るなど多岐に渡る
* GCPを全社的に利用
* 成熟したエンジニアリング組織を持つ。データ基盤を主に担当する専属のデータエンジニアも数名いる。筆者はデータエンジニア。

# dbt, dataformについてざっくり

どちらも、ETL / ELTにおけるT (Transformation) を担当するツールです。

つまりは、様々なデータソースからデータレイクにロードされたデータを、ビジネスやプロダクトが使いやすい形に変換する部分を担います。

### [dbt](https://docs.getdbt.com/docs/introduction)

[fishtown analytics](https://www.fishtownanalytics.com/) という企業により、2016年から開発されています。dbtとは、 `data build tool` の略です。

CLIとして利用するOSS版と、dbt Cloudという統合開発環境＋実行環境が付属した商用版があります。CLIの場合、スケジューラーや実行環境がないため、cronやAirflowなどとともに利用することになるでしょう。

### [dataform](https://docs.dataform.co/)

2020年12月に、[Googleによる買収が発表され](https://cloud.google.com/blog/products/data-analytics/welcoming-dataform-to-bigquery)、界隈では非常に話題になりました。いつからサービスを開始しているのかわかりませんが、私自身は存在すらしりませんでした。

基本的には、統合開発環境と実行環境をセットで提供しています。CLIやREST APIもありますが、基本的にはGUIを利用します。

# 比較



# 考察

* 特徴
* ユースケース
* 個人的な好み
* 足りていないこと
* 我々の選択
  * これは別ブログでもいいかも